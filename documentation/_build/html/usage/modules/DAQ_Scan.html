



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>DAQ Scan &mdash; PyMoDAQ 2.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="DAQ Logger" href="DAQ_Logger.html" />
    <link rel="prev" title="DashBoard" href="DashBoard.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> PyMoDAQ
          

          
            
            <img src="../../_static/splash.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Features.html">PyMoDAQ’s overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../How_to_start.html">How to Start</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Description.html">Modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="Main_Modules.html">Main Modules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="DashBoard.html">DashBoard</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">DAQ Scan</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#main-control-window">Main Control Window</a></li>
<li class="toctree-l4"><a class="reference internal" href="#navigator">Navigator</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="DAQ_Logger.html">DAQ Logger</a></li>
<li class="toctree-l3"><a class="reference internal" href="DAQ_Move.html">DAQ Move</a></li>
<li class="toctree-l3"><a class="reference internal" href="DAQ_Viewer.html">DAQ Viewer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="data_viewers.html">Data Viewers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../saving.html">Saving datas</a></li>
<li class="toctree-l2"><a class="reference internal" href="Utility_Modules.html">Utility Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Description.html#plugins">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CustomApp.html">Custom Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tcpip.html">TCP/IP communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Feedback.html">Who use it?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../APIdoc.html">Library Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PyMoDAQ</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../Description.html">Modules</a> &raquo;</li>
        
          <li><a href="Main_Modules.html">Main Modules</a> &raquo;</li>
        
      <li>DAQ Scan</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/usage/modules/DAQ_Scan.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="daq-scan">
<span id="daq-scan-module"></span><h1>DAQ Scan<a class="headerlink" href="#daq-scan" title="Permalink to this headline">¶</a></h1>
<p>This module is an extension of the DashBoard but is the heart of PyMoDAQ, it will:</p>
<ul class="simple">
<li><p>setup automatic data acquisition of detectors as a function of one or more actuators</p></li>
<li><p>save datas in hierarchical hdf5 binary files (compatible with the <a class="reference internal" href="Utility_Modules.html#h5browser-module"><span class="std std-ref">H5Browser</span></a> used to display/explore
data)</p></li>
</ul>
<p>The flow of this module is as follow:</p>
<ul class="simple">
<li><p>at startup you have to define/load a preset (see <a class="reference internal" href="Utility_Modules.html#preset-manager"><span class="std std-ref">Preset manager</span></a>) in the Dashboard</p></li>
<li><p>Select DAQ_Scan in the actions menu</p></li>
<li><p>A dataset will be declared the first time you set a scan. A dataset is equivalent to a single saved file
containing multiple scans.  One can see a dataset as a series of scans related to single <em>subject/sample to be characterized</em>.</p></li>
<li><p>Metadata can be saved for each dataset and then for each scan and be later retrieved from the saved file
(see <a class="reference internal" href="../saving.html#saving-doc"><span class="std std-ref">Saving datas</span></a> and <a class="reference internal" href="Utility_Modules.html#h5browser-module"><span class="std std-ref">H5Browser</span></a>)</p></li>
<li><p>Performs multiple scans exploring all the parameters needed for your experiment</p></li>
</ul>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This module has a main control window (see <a class="reference internal" href="#daq-scan-main"><span class="std std-numref">Fig. 8</span></a>).
The dashboard gives you full control for manual adjustments
of each actuator, checking their impact on live data from the detectors. Once all is set, one can move to
an automated scan using the main control window.</p>
</div>
<div class="section" id="main-control-window">
<h2>Main Control Window<a class="headerlink" href="#main-control-window" title="Permalink to this headline">¶</a></h2>
<p>The main control window is comprised of a left panel to set all parameters while the right panel will
display live data taken during a scan.</p>
<blockquote>
<div></div></blockquote>
<div class="figure align-default" id="id2">
<span id="daq-scan-main"></span><img alt="daq_scan_main" src="../../_images/main_ui.png" />
<p class="caption"><span class="caption-number">Fig. 8 </span><span class="caption-text">Main DAQ_Scan user interface.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="scan-flow">
<h3>Scan Flow<a class="headerlink" href="#scan-flow" title="Permalink to this headline">¶</a></h3>
<p>The top of the settings panel is comprised of buttons to set, start and stop a scan as well as quit the application.</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../_images/quit.png"><img alt="quit" src="../../_images/quit.png" style="width: 60pt; height: 20pt;" /></a>: will shut down all modules and quit the application (redundant with: <em>File/Quit</em> menu)</p></li>
<li><p><strong>Set Scan</strong>: take into account the selected scanner settings and valid them or not.</p></li>
<li><p><strong>Init. Positions</strong>: will move all selected actuators to their initial positions as defined by the currently set scan.</p></li>
<li><p><a class="reference internal" href="../../_images/start_scan.png"><img alt="start" src="../../_images/start_scan.png" style="width: 60pt; height: 20pt;" /></a>: will start the currently set scan (first it will set it then start it)</p></li>
<li><p><a class="reference internal" href="../../_images/stop_scan.png"><img alt="stop" src="../../_images/stop_scan.png" style="width: 60pt; height: 20pt;" /></a>: stop the currently running scan.</p></li>
</ul>
</div>
<div class="section" id="settings">
<h3>Settings<a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h3>
<p>The settings tree as shown on <a class="reference internal" href="#daq-scan-main"><span class="std std-numref">Fig. 8</span></a> is actually divided in a few subtrees that contain everything
needed to define a given scan, save data and plot live information.</p>
<div class="section" id="module-manager">
<h4>Module Manager<a class="headerlink" href="#module-manager" title="Permalink to this headline">¶</a></h4>
<p>The leftmost tree is the user interface of the module manager (see <a class="reference internal" href="Utility_Modules.html#module-manager"><span class="std std-ref">Module Manager</span></a> for details). It allows the user
to select the actuators and detectors for the next scan (see <a class="reference internal" href="#list-modules"><span class="std std-numref">Fig. 9</span></a>). This interface is also used for the
DAQ_Logger extension.</p>
<blockquote>
<div></div></blockquote>
<div class="figure align-default" id="id3">
<span id="list-modules"></span><img alt="list_modules" src="../../_images/list_modules.png" />
<p class="caption"><span class="caption-number">Fig. 9 </span><span class="caption-text">List of declared modules from a preset</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="general-settings">
<h4>General Settings<a class="headerlink" href="#general-settings" title="Permalink to this headline">¶</a></h4>
<p>The General Settings are comprised of (see <a class="reference internal" href="#general-settings-fig"><span class="std std-numref">Fig. 10</span></a>):</p>
<ul>
<li><p><strong>Time Flow</strong></p>
<ul class="simple">
<li><p><strong>Wait time</strong>: extra time the application wait before moving on to the next scan step. Enable
rough cadencing if needed</p></li>
<li><p><strong>timeout</strong>: raise a timeout if one of the scan step (moving or detecting) is taking a longer time than timeout to respond</p></li>
</ul>
</li>
<li><p><strong>Scan options</strong> :</p>
<ul class="simple">
<li><p><strong>N average</strong>: Select how many set scans to perform. Save all individual scans and its average</p></li>
<li><p><strong>Plot From</strong>: select the detector from which data will be taken in order to plot live data</p></li>
</ul>
<blockquote>
<div></div></blockquote>
</li>
</ul>
<div class="figure align-default" id="id4">
<span id="general-settings-fig"></span><img alt="list_modules" src="../../_images/general_settings.png" />
<p class="caption"><span class="caption-number">Fig. 10 </span><span class="caption-text">General settings for the DAQ_Scan module</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="save-settings">
<h4>Save Settings<a class="headerlink" href="#save-settings" title="Permalink to this headline">¶</a></h4>
<p>The Save Settings (see <a class="reference internal" href="#save-settings-fig"><span class="std std-numref">Fig. 11</span></a>) is the user interface of the <a class="reference internal" href="Utility_Modules.html#h5saver-module"><span class="std std-ref">H5Saver</span></a>, it is a general
interface to save the scans in hierarchical hdf5 file (it is also used in the DAQ_Logger extension):</p>
<blockquote>
<div></div></blockquote>
<div class="figure align-default" id="id5">
<span id="save-settings-fig"></span><img alt="list_modules" src="../../_images/save_settings.png" />
<p class="caption"><span class="caption-number">Fig. 11 </span><span class="caption-text">Save settings for the DAQ_Scan extension</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="scanner">
<h3>Scanner<a class="headerlink" href="#scanner" title="Permalink to this headline">¶</a></h3>
<p>Finally all specifics of the upcoming scan are configured using the <a class="reference internal" href="Utility_Modules.html#scanner-paragrah"><span class="std std-ref">Scanner</span></a> module interface as seen on
<a class="reference internal" href="#scan2d-fig2"><span class="std std-numref">Fig. 12</span></a> in the case of an adaptive Scan2D scan configuration.</p>
<blockquote>
<div></div></blockquote>
<div class="figure align-default" id="id6">
<span id="scan2d-fig2"></span><img alt="scanner_fig" src="../../_images/scanner_widget.png" />
<p class="caption"><span class="caption-number">Fig. 12 </span><span class="caption-text">The Scanner user interface set on a <em>Scan2D</em> scan type and an <em>adaptive</em> scan subtype and its particular settings.</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="live-data">
<h3>Live data<a class="headerlink" href="#live-data" title="Permalink to this headline">¶</a></h3>
<p>For a data acquisition system to be efficient, live data must be plotted in order to follow the
experiment behaviour and check if something is wrong or successfull without the need to perform
full data analysis. For this PyMoDAQ live data display will show all datas exported
by the setting <strong>plot from</strong> (defining which DAQ_Viewer module exports data). The total dimensionality of the datas + the scan dimensions
(1 for scan1D and 2 for Scan2D) should not exceed 2 (this means one cannot plot more complex plots than 2D intensity plots).</p>
<blockquote>
<div></div></blockquote>
<div class="figure align-default" id="id7">
<span id="det1d"></span><img alt="1Ddetector" src="../../_images/1Ddetector.png" />
<p class="caption"><span class="caption-number">Fig. 13 </span><span class="caption-text">An example of a 1D detector having 2 channels. 0D data are generated as well from the integration of channel CH0
within the cyan region of interest (ROI_00).</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<p>For instance, if the chosen detector is a 1D one, see <a class="reference internal" href="#det1d"><span class="std std-numref">Fig. 13</span></a>. Such a detector can generate various
type of live data. It will export the raw 1D data and integrated 0D data within the declared ROI, then:</p>
<ul>
<li><p>if the scan is 1D:</p>
<ul class="simple">
<li><p>exported 0D datas will be displayed on the <em>1D Plot</em> tab as a line as a function of the actuator
<em>position</em>, see <a class="reference internal" href="#scan1d-0d"><span class="std std-numref">Fig. 14</span></a>.</p></li>
<li><p>exported 1D datas will be displayed on the <em>2D Plot</em> tab as color levels as a function of the
actuator <em>position</em>, see <a class="reference internal" href="#scan1d-1d"><span class="std std-numref">Fig. 15</span></a>.</p></li>
</ul>
<blockquote>
<div></div></blockquote>
</li>
</ul>
<div class="figure align-default" id="id8">
<span id="scan1d-0d"></span><img alt="scan1D_0D" src="../../_images/scan1D_0D.png" />
<p class="caption"><span class="caption-number">Fig. 14 </span><span class="caption-text">An example of a detector exporting 0D live data plotted as a function of the actuator <em>position</em></span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
<div class="legend">
</div>
</div>
<div class="figure align-default" id="id9">
<span id="scan1d-1d"></span><img alt="scan1D_1D" src="../../_images/scan1D_1D.png" />
<p class="caption"><span class="caption-number">Fig. 15 </span><span class="caption-text">An example of a detector exporting 1D live data plotted as a function of the actuator <em>position</em>. Channel
CH0 is plotted in red while channel CH1 is plotted in green.</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<ul>
<li><p>if the scan is 2D:</p>
<ul class="simple">
<li><p>exported 0D datas will be displayed on the <em>2D Plot</em> tab as a pixel map where each pixel coordinates
represents a scan coordinate. The color and intensity of the pixels refer to channels and data
values, see <a class="reference internal" href="#scan2d-0d"><span class="std std-numref">Fig. 16</span></a> for a <em>spiral</em> 2D scan.</p></li>
</ul>
<blockquote>
<div></div></blockquote>
</li>
</ul>
<div class="figure align-default" id="id10">
<span id="scan2d-0d"></span><img alt="scan2D_0D" src="../../_images/scan2D_0D.png" />
<p class="caption"><span class="caption-number">Fig. 16 </span><span class="caption-text">An example of a detector exporting 0D live data plotted as a function of the 2 actuators’s
<em>position</em>. Integrated region of channel CH0 is plotted in red.</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<p>So at maximum, 2D dimensionality can be represented. In order to see live data from 2D detectors, one
should therefore export lineouts from ROIs or integrate data. All these operations are extremely simple
to perform using the ROI features of the data viewers (see <a class="reference internal" href="data_viewers.html#data-viewers"><span class="std std-ref">Data Viewers</span></a>)</p>
</div>
</div>
<div class="section" id="navigator">
<span id="navigator-paragrah"></span><h2>Navigator<a class="headerlink" href="#navigator" title="Permalink to this headline">¶</a></h2>
<p>From version 1.4.0, a new module has been added: the Navigator (daq_utils.plotting.navigator). It is most useful when
dealing with 2D scans such as XY
cartography. As such, it is not displayed by default. It consists of a tree like structure displaying all
currently saved 2D scans (in the current dataset) and a viewer where selected scans can be displayed at their respective
locations. It can be displayed using the <em>Settings</em> menu, <em>Show Navigator</em> option. <a class="reference internal" href="#id1"><span class="std std-numref">Fig. 17</span></a> shows the DAQ_scan extension
with activated Navigator and a few scans. This navigator can also be used as a <a class="reference internal" href="Utility_Modules.html#scan-selector-paragraph"><span class="std std-ref">Scan Selector</span></a> viewer to
quickly explore and select areas to scan on a 2D phase space.</p>
<blockquote>
<div></div></blockquote>
<div class="figure align-default" id="id11">
<span id="id1"></span><img alt="navigator" src="../../_images/navigator.png" />
<p class="caption"><span class="caption-number">Fig. 17 </span><span class="caption-text">An example of dataset displaying several 2D scans at their respective locations (up and right axis)</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="DAQ_Logger.html" class="btn btn-neutral float-right" title="DAQ Logger" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="DashBoard.html" class="btn btn-neutral float-left" title="DashBoard" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Weber Sébastien

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>