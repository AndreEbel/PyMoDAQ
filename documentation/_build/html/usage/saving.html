



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Saving datas &mdash; PyMoDAQ 2.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Utility Modules" href="modules/Utility_Modules.html" />
    <link rel="prev" title="Data Viewers" href="modules/data_viewers.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> PyMoDAQ
          

          
            
            <img src="../_static/splash.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Features.html">PyMoDAQ’s overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="How_to_start.html">How to Start</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Description.html">Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="modules/Main_Modules.html">Main Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules/data_viewers.html">Data Viewers</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Saving datas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#from-daq-viewer">From DAQ_Viewer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#single-datas">Single Datas</a></li>
<li class="toctree-l4"><a class="reference internal" href="#continuous-saving">Continuous Saving</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#from-daq-scan">From DAQ_Scan</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exploring-datas">Exploring datas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="modules/Utility_Modules.html">Utility Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Description.html#plugins">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="CustomApp.html">Custom Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="tcpip.html">TCP/IP communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="Feedback.html">Who use it?</a></li>
<li class="toctree-l1"><a class="reference internal" href="Contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="APIdoc.html">Library Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PyMoDAQ</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="Description.html">Modules</a> &raquo;</li>
        
      <li>Saving datas</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/usage/saving.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="saving-datas">
<span id="saving-doc"></span><h1>Saving datas<a class="headerlink" href="#saving-datas" title="Permalink to this headline">¶</a></h1>
<p>Datas saved using PyMoDAQ, either the <em>DAQ_Scan</em> or the <em>DAQ_Viewer</em> modules, use a binary format
known as <em>hdf5</em>. This format was originally developped to save big volume of datas from large instruments.
Its structure is hierarchical (a bit as folder trees) and one can add metadata to all entries in the tree.
For instance, the data type, shape but also some more complex info such as all the settings related to a
module or a plugin. This gives a unique file containing both datas and metadata. For these data and metadata
to be saved and interpreted correctly by the <em>H5Browser</em>, a utility module is used: <a class="reference internal" href="modules/Utility_Modules.html#h5saver-module"><span class="std std-ref">H5Saver</span></a> within
the DAQ_Viewer module and the DAQ_Scan module. This should also be used when building a <em>custom application</em>.</p>
<div class="section" id="from-daq-viewer">
<span id="daq-viewer-saving"></span><h2>From DAQ_Viewer<a class="headerlink" href="#from-daq-viewer" title="Permalink to this headline">¶</a></h2>
<div class="section" id="single-datas">
<span id="daq-viewer-saving-single"></span><h3>Single Datas<a class="headerlink" href="#single-datas" title="Permalink to this headline">¶</a></h3>
<p>Datas saved directly from a DAQ_Viewer (for instance the one on <a class="reference internal" href="modules/DAQ_Scan.html#det1d"><span class="std std-numref">Fig. 13</span></a>) will be recorded in
a h5file whose structure will be represented
like <a class="reference internal" href="#single-data"><span class="std std-numref">Fig. 27</span></a> using PyMoDAQ’s h5 browser (see <a class="reference internal" href="modules/Utility_Modules.html#h5browser-module"><span class="std std-ref">H5Browser</span></a>). The various type
of data exported by the viewer are saved in a dedicated entry (<em>Data0D</em>, …) and all channels are recorded
within as subentries. Metadata from the detector settings, the measurement module and the activated ROIs
are also recorded.</p>
<blockquote>
<div></div></blockquote>
<div class="figure align-default" id="id2">
<span id="single-data"></span><img alt="single_data" src="../_images/single_data.png" />
<p class="caption"><span class="caption-number">Fig. 27 </span><span class="caption-text">h5 file content containing saved data from a DAQ_Viewer detector (see <a class="reference internal" href="modules/DAQ_Scan.html#det1d"><span class="std std-numref">Fig. 13</span></a>)</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="continuous-saving">
<span id="id1"></span><h3>Continuous Saving<a class="headerlink" href="#continuous-saving" title="Permalink to this headline">¶</a></h3>
<p>When the <em>continuous saving</em> parameter is set, new parameters are appearing on the <em>DAQ_Viewer</em> panel
(see <a class="reference internal" href="#figure-continuous"><span class="std std-numref">Fig. 28</span></a>).</p>
<ul>
<li><p><em>Base path</em>: indicates where the data will be saved. If it doesn’t exist the module will try to create it</p></li>
<li><p><em>Base name</em>: indicates the base name from which the save file will derive</p></li>
<li><p><em>Current Path</em>: <em>readonly</em>, complete path of the saved file</p></li>
<li><p><em>Do Save</em>: Initialize the file and logging can start. A new file is created if clicked again.</p></li>
<li><p><em>Compression options</em>: data can be compressed before saving, using one of the proposed library and the given value of compression [0-9], see <em>pytables</em> documentation.</p>
<blockquote>
<div></div></blockquote>
</li>
</ul>
<div class="figure align-default" id="id3">
<span id="figure-continuous"></span><img alt="continuous" src="../_images/continuous_saving.png" />
<p class="caption"><span class="caption-number">Fig. 28 </span><span class="caption-text">Continuous Saving options</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>The saved file will follow this general structure:</p>
<blockquote>
<div><p>D:\Data\2018\20181220\Data_20181220_16_58_48.h5</p>
</div></blockquote>
<p>With a base path (<code class="docutils literal notranslate"><span class="pre">D:\Data</span></code> in this case) followed by a subfolder year, a subfolder day and a filename
formed from a <em>base name</em> followed by the date of the day and the time at which you started to log data.
<a class="reference internal" href="#figure-continuous-struct"><span class="std std-numref">Fig. 29</span></a> displays the tree structure of such a file, with</p>
<blockquote>
<div></div></blockquote>
<div class="figure align-default" id="id4">
<span id="figure-continuous-struct"></span><img alt="continuous" src="../_images/continuous_data_structure.png" />
<p class="caption"><span class="caption-number">Fig. 29 </span><span class="caption-text">Continuous Saving options</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="from-daq-scan">
<span id="daq-scan-saving"></span><h2>From DAQ_Scan<a class="headerlink" href="#from-daq-scan" title="Permalink to this headline">¶</a></h2>
<p>DAQ_Scan module will save your data in <strong>datasets</strong>. Each <strong>dataset</strong> is a unique h5 file and may contain multiple scans. The
idea behind this is to have a unique file for a set of related data (the <strong>dataset</strong>) together with all the meta information:
logger data, module parameters (settings, ROI…) even <em>png</em> screenshots of the various panels.</p>
<p><a class="reference internal" href="#figure-h5browser-data"><span class="std std-numref">Fig. 30</span></a> displays the content of a typical <strong>dataset</strong> file containing various scans and how each data
and metadata is used by the H5Browser to display the info to the user.</p>
<blockquote>
<div></div></blockquote>
<div class="figure align-default" id="id5">
<span id="figure-h5browser-data"></span><img alt="h5 browser" src="../_images/h5browser_datas.png" />
<p class="caption"><span class="caption-number">Fig. 30 </span><span class="caption-text">h5 browser and arrows to explain how each data or metadata is being displayed</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p>In order to save correctly your datas in custom applications, a utility module is to be used: pymodaq.daq_utils.h5saver,
it will save scans and datas following the rules displayed on <a class="reference internal" href="#figure-dataset-layout"><span class="std std-numref">Fig. 31</span></a> below:</p>
<blockquote>
<div></div></blockquote>
<div class="figure align-default" id="figure-dataset-layout">
<img alt="File layout" src="../_images/dataset_file_layout.PNG" />
</div>
</div>
<div class="section" id="exploring-datas">
<h2>Exploring datas<a class="headerlink" href="#exploring-datas" title="Permalink to this headline">¶</a></h2>
<p>h5file saved using PyMoDAQ can be explored using the <a class="reference internal" href="modules/Utility_Modules.html#h5browser-module"><span class="std std-ref">H5Browser</span></a> utility module. Both datas and metadatas can be explored.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="modules/Utility_Modules.html" class="btn btn-neutral float-right" title="Utility Modules" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="modules/data_viewers.html" class="btn btn-neutral float-left" title="Data Viewers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Weber Sébastien

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>